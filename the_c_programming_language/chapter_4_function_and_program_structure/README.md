# 第四章 函数与程序结构

## 4.1 函数的基本知识
最简单的函数如图
```
dunny(){}
```
它不执行操作也没有返回值,可以在开发时候保留位置利于以后填充.
若函数省略了返回值类型,则默认为int型.

程序可以看作变量定义与函数定义的集合.函数之间的通信可以通过参数,函数返回值以及外部变量进行.函数在源文件中出现的次序是任意的.只要保证每一个函数不被分离到多个文件中,源程序就可以分为多个文件.

被调用函数通过return语句向调用者返回值
```c
return 表达式
```
必要时,表达式将被转换为返回值的类型.表达式通常加一对圆括号,此处括号是可选的.

调用函数可以忽略返回值,return后面也不一定需要表达式.return后面没有表达式时,函数不会向调用者返回值.当被调用的函数执行到最右边的花括号时而结束执行时,控制同样会返回给调用者(不返回值).如果某个函数从一个地方返回有返回值,而从另一个地方没有返回值,该函数不非法,但可能是一种文体的征兆.

## 4.2 返回非整型值得函数
- [string_to_double.cpp 字符串转为浮点数](./string_to_double.cpp)
标准库中包含类似atof函数,在头文件`<stdlib.h>`中声明.
- [calculator 简单计算器](calculator.cpp)
```cpp
double sum,atof(char[])
```
函数声明与定义类型必须一致. 如果atof函数与调用它的主函数在同一源文件中,类型不一致,编译器会监测出错误. 但如果是单独编译,不匹配错误不会被检测出来,结果毫无意义.

如果先前没有声明的一个名字出现在表达式中,并且其后紧跟一个左圆括号,那么上下文会认为这是一个函数名字,该函数的返回值被假定为int,但上下文不对参数做任何假设. 并且,如果函数声明不含参数,如:
```cpp
double atof()
```
那么编译程序不会对atof的参数做任何假设, 并会关闭所有参数检查. 对空参数表的这种特殊处理是为了使新的编译器能编译比较古老的c语言程序.不过这是不提倡的,如果带有参数,则要声明他们,如果没有参数,用`void`进行声明.
